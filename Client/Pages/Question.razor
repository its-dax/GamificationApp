@page "/Question"
@inherits QuestionsBase


@if (Questions is null)
{
    <h3>Kérdések betöltése...</h3>
}
else
{
    var approvedQuestions = Questions.Where(q => q.IsApproved);
    var notApprovedQuestions = MyQuestions.Where(q => (q.IsApproved == false));
    
                
    <AuthorizeView Roles="Student">
        <Authorized>
            <h2>Kérdések</h2>
            @if (approvedQuestions.Any())
            {
                foreach (var approvedQuestionDto in approvedQuestions)
                {
                    <div class="col-auto">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-3">
                                    @approvedQuestionDto.Title
                                </h5>
                                <p class="card-text">
                                    <b>A)</b> @approvedQuestionDto.A
                                </p>
                                <p class="card-text">
                                    <b>B)</b> @approvedQuestionDto.B
                                </p>
                                <p class="card-text">
                                    <b>C)</b> @approvedQuestionDto.C
                                </p>
                                <p class="card-text">
                                    <b>D)</b> @approvedQuestionDto.D
                                </p>
                            </div>
                        </div>
                    </div>
                }
            }
        </Authorized>
    </AuthorizeView>
    <AuthorizeView Roles="Teacher">
        <Authorized>
            <h2>Elfogadásra váró kérdések</h2>

            @if (notApprovedQuestions.Any())
            {
                foreach (var notApprovedQuestionDto in notApprovedQuestions)
                {
                    <div class="col-auto">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title mb-3">
                                    @notApprovedQuestionDto.Title
                                </h5>
                                <p class="card-text">
                                    <b>A) </b> @notApprovedQuestionDto.A
                                </p>
                                <p class="card-text">
                                    <b>B) </b> @notApprovedQuestionDto.B
                                </p>
                                <p class="card-text">
                                    <b>C) </b> @notApprovedQuestionDto.C
                                </p>
                                <p class="card-text">
                                    <b>D) </b> @notApprovedQuestionDto.D
                                </p>
                                <p class="card-text">
                                    <b>Helyes válasz: </b> @notApprovedQuestionDto.GoodAnswer
                                </p>
                            </div>
                        </div>
                        <div class="card-footer"> 
                            <button @onclick="Approve" class="btn btn-primary">Elfogadás</button>
                        </div>
                    </div>
                    <br/>
                    <br/>
                }
            }
        </Authorized>
    </AuthorizeView>
    <AuthorizeView>
        <NotAuthorized>
            <h1> Hey </h1>
        </NotAuthorized>
    </AuthorizeView>
}

@code{
    public void Approve()
    {
        
    }
}
